(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,n,t){e.exports=t(23)},23:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(9),l=t.n(o),c=t(3),u=function(e){var n=e.header,t=e.newFilter,a=e.handleFilterChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,n),r.a.createElement("div",null,r.a.createElement("span",{role:"img","aria-label":"enter filter"},"\ud83d\udd0d"),r.a.createElement("input",{value:t,onChange:a})))},i=function(e){var n=e.header,t=e.addName,a=e.newName,o=e.handleNameChange,l=e.newNumber,c=e.handleNumberChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,n),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("span",{role:"img","aria-label":"person emoji"},"\ud83e\uddd1")," name: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("span",{role:"img","aria-label":"phone emoji"},"\ud83d\udcde")," number: ",r.a.createElement("input",{value:l,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},r.a.createElement("span",{role:"img","aria-label":"plus emoji"},"\u2795")," add"))))},m=function(e){var n=e.filteredPersons,t=e.personDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),n.map(function(e){return r.a.createElement("p",{key:e.id},r.a.createElement("span",{role:"img","aria-label":"person emoji"},"\ud83e\uddd1")," ",e.name," ",r.a.createElement("span",{role:"img","aria-label":"phone emoji"},"\ud83d\udcde")," ",e.number," ",r.a.createElement("button",{onClick:function(){return t(e)}},r.a.createElement("span",{role:"img","aria-label":"thrash can emoji for deleting"},"\ud83d\uddd1\ufe0f")))}))},s=function(e){var n=e.message,t=e.style;if(null===n)return null;var a={color:t||"black",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px}"};return r.a.createElement("div",{style:a,className:"error"},n)},d=t(25),f="/api/persons",p=function(){return d.a.get(f).then(function(e){return e.data}).catch(function(e){return{error:"get"}})},g=function(e){return d.a.post(f,e).then(function(e){return e.data}).catch(function(e){throw console.log("persons.create.error",e),e})},h=function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then(function(e){return console.log("put return response",e),e.data}).catch(function(e){return console.log("put return error",e),{error:"update"}})},b=function(e){return(d.a.delete("".concat(f,"/").concat(e))-console.log("remove init")).then(function(e){return console.log("remove",e),[]}).catch(function(e){return{error:"remove ".concat(e)}})},E=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],l=Object(a.useState)(null),d=Object(c.a)(l,2),f=d[0],E=d[1],v=Object(a.useState)(null),w=Object(c.a)(v,2),j=w[0],O=w[1],y=Object(a.useState)(""),N=Object(c.a)(y,2),C=N[0],F=N[1],S=Object(a.useState)(""),k=Object(c.a)(S,2),R=k[0],x=k[1],D=Object(a.useState)(""),P=Object(c.a)(D,2),B=P[0],J=P[1],T=Object(a.useState)(!1),z=Object(c.a)(T,2),A=z[0],I=z[1];Object(a.useEffect)(function(){p().then(function(e){o(e)}).catch(function(e){G("general error","red"),console.log("error getall",e)})},[]);var q=function(){x(""),F("")},G=function(e,n){O(n),E(e),setTimeout(function(){E(null)},2e3)},H=A?t.filter(function(e){return e.name.includes(B)}):t;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{message:f,style:j}),r.a.createElement(u,{header:"Filter",newFilter:B,handleFilterChange:function(e){J(e.target.value),e.target.value?I(!0):I(!1)}}),r.a.createElement(i,{header:"Add new person",addName:function(e){var n=t;e.preventDefault();var a={name:C,number:R},r=n.find(function(e){return e.name===C});if(console.log("checkforDup",r),r)return window.confirm("Found matey ".concat(r.name," want to replace numbeRRr ").concat(r.number," with ").concat(R," instead, yarr \ud83e\udd9c ?"))?(r.number=R,void h(r.id,a).then(function(e){console.log("put response",e),q(),"error"in e?(G("Error: server and client missmatch: ".concat(r.name," has been deleted"),"red"),o(n.filter(function(e){return e!==r}))):G("The numberrRR of ".concat(r.name," was changed to ").concat(R),"green")})):void 0;g(a).then(function(e){q(),o(n.concat(e)),G("".concat(e.name," was added"),"green")}).catch(function(e){console.log("app.error",e),console.log("app.error.response",e.response),G(e.response.data.error,"red")})},newName:C,handleNameChange:function(e){F(e.target.value)},newNumber:R,handleNumberChange:function(e){x(e.target.value)}}),r.a.createElement(m,{filteredPersons:H,personDelete:function(e){var n=t;window.confirm("Do you really want to delete ".concat(e.name,"?"))&&(b(e.id).then(function(n){console.log("weird error",n),"error"in n?G("".concat(e.name," has already been deleted"),"red"):G("".concat(e.name," deleted"),"green")}),o(n.filter(function(n){return n!==e})))}})))};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(E,null))}},[[10,2,1]]]);
//# sourceMappingURL=main.21cc7c8e.chunk.js.map